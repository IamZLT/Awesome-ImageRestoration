# Awesome-ImageRestoration

本项目旨在收集和整理与图像恢复（Image Restoration）相关的论文、资料和资源，方便自己和相关研究者和查阅。

## 简介

图像恢复（Image Restoration）旨在从受退化影响的图像恢复出高质量图像，包括去噪、去模糊、超分辨率、去压缩、去除雨雪和雾霾、低光增强等多种任务。传统上，每种退化类型往往由专门模型单独处理，但在实际场景中图像经常同时遭受多重未知退化，部署多模型既低效又难以适应新的退化类型。为了解决这一问题，“All-in-One”图像恢复（AiOIR）范式近年兴起，其目标是在**单一统一框架**下自适应处理多种退化。All-in-One模型通过共享不同任务的知识并学习特定退化特征，提高了模型的通用性和实用性。从2023年至2025年，AiOIR成为计算机视觉顶会（CVPR、ICCV、ECCV、NeurIPS等）和权威期刊（如TPAMI、IJCV、TIP等）的研究热点之一，涌现出大量创新方法和显著进展。

近年来的研究重点在于**统一模型如何高效处理多种退化**。研究者提出了多种架构改进和学习策略，包括引入**提示（Prompt）机制 **、多**专家（Mixture-of-Experts, MoE）模块** 、**多模态信息融合**以及**智能代理式策略**等，以增强单模型应对不同退化的能力。这些创新在提升图像客观质量指标（PSNR、SSIM等）的同时，也逐步改善了模型对复杂退化的泛化能力 。然而，All-in-One模型仍面临任务冲突（不同任务目标矛盾）、未知退化类型（分布外退化难处理）、模型复杂度与效率、高质量真实数据匮乏等挑战，一些方法生成的细节纹理仍不够令人满意 。

### **Prompt学习范式：提示引导的统一恢复**

**PromptIR（NeurIPS 2023）**是将NLP提示学习思想引入图像恢复的一项开创性工作。该方法在统一的恢复网络中加入轻量级**提示模块**，由输入图像自适应生成描述退化情况的向量（Prompt tokens），并在解码阶段多次注入网络以引导去噪、去雨、去雾等过程  。PromptIR无需预先知道退化类型，仅依赖输入图像自动预测并应用对应提示，从而实现盲恢复 。提示模块由**提示生成子模块**和**提示交互子模块**组成，可以灵活插入现有恢复模型 。实验证明，PromptIR在**图像去噪、去雨、去雾**等多个任务上达到或超过了单任务SOTA性能，而仅使用一个统一模型 。与早期对比学习方法相比（如AirNet 2022年提出的对比编码退化的方法 ），PromptIR能更有效地区分不同退化的特征嵌入 。该工作证明了**视觉提示**在低级视觉多任务统一模型中的巨大潜力。此外，还有研究探索*提示中套提示*、对比提示等策略以进一步提升泛化性 。

**InstructIR（ECCV 2024）则更进一步，引入自然语言指令**作为提示，允许用户用人类可读描述指导恢复过程 。这是首个利用人类文本指令来引导图像恢复的尝试 。InstructIR在模型中融合了文本编码，将用户输入的修复需求（如“去除雨滴并提亮图像”）转化为指导信号，从而针对性地恢复图像  。有别于PromptIR使用模型自动学得的提示向量，InstructIR直接利用**人类语言提示**，灵活性更高 。该方法在去噪、去雨、去模糊、去雾和低光增强等任务上取得了**比先前All-in-One方法高出约1dB**的PSNR提升 。这表明结合大规模语言模型理解能力，利用文本指令进行低层图像任务的细粒度控制，是All-in-One恢复的一个新兴方向。

### **混合专家范式：基于Mixture-of-Experts的统一恢复**

另一类重要方法是引入**混合专家（MoE）架构**，即为不同退化设计不同的专家子网络或参数模块，由路由机制选择性激活，从而实现针对性恢复和参数共享。MoE思路可以避免单一网络处理中产生的任务冲突和无效参数浪费 。2023–2025年出现了多种MoE变体和改进：

- **ADMS（CVPR 2023）**：Park等人提出的*自适应判别滤波模型*（Adaptive Discriminative Filter-based Model）是较早的All-in-One探索之一 。ADMS受**滤波归因积分梯度(FAIG)方法启发，在统一网络中为每种退化类型引入少量专用卷积滤波器**，参数量仅占总模型的约3%，以降低不同任务间的干扰 。同时通过一个**退化类别分类器**自动识别输入图像的退化类型，并**自适应启用对应的专用滤波器**，使网络针对该退化进行优化处理 。这种设计有效将多退化任务解耦，仅用极少的额外参数实现对每种退化的“定制”处理 。在Rain-Noise-Blur（三合一）以及Rain-Snow-Haze（三合一）两个公开基准上，ADMS取得了**当时的SOTA性能** 。该方法证明，通过小规模可切换的任务特定模块，可缓解多任务模型的相互干扰。
- **LoRA-IR（2024，待刊）**：Yuang Ai等人提出的LoRA-IR采用了**低秩适配（LoRA）**结合MoE的策略。其思路是在统一恢复网络中，不直接训练完整的专家分支，而是为每个退化学习一组低秩权重调整（低秩专家）。这些LoRA专家作为小规模增量模块，能够在保持共享主干的同时，高效注入针对特定退化的调整  。LoRA-IR首先利用CLIP视觉模型提取输入图像的退化语义表示，作为**退化路由器**（DG-Router）指导模型选择相应的低秩专家组合  。训练分两阶段：先在DG-Router指导下预训练基底IR网络，再通过LoRA微调形成多个低秩专家并构建MoE架构  。推理时，根据CLIP判别的退化类型概率，**稀疏激活不同LoRA专家**调节网络权重，实现动态适配 。由于每个专家仅占用极小参数且通过概率路由融合，LoRA-IR实现了高效的多退化建模和专家协作  。实验表明，LoRA-IR在多达14种图像恢复任务、29个基准上取得**全领域领先**的效果 。相比多编码器或纯Prompt方法，它兼具低冗余和高适应性的优点 。
- **MoCE-IR（CVPR 2025）**：Zamfir等人提出的**混合复杂度专家**模型（Mixture-of-Complexity Experts）是MoE架构的最新演进  。MoCE-IR针对传统MoE存在的专家利用不均衡问题，引入**计算复杂度不同的专家模块**  。具体来说，模型包含若干专家分支，每个专家的计算量和感受野规模各不相同，以适应不同难度的退化（如运动模糊需要更大局部感受野，轻微噪声只需低复杂度处理）  。核心创新在于**弹簧力路由机制**：在未知退化情况下，模型倾向**优先将图像送入“低复杂度”专家处理**，并通过类似机械弹簧力的偏置来决定是否需要传递到更复杂的专家  。这种复杂度比例偏置促使简单退化由轻量专家解决，只有当低阶专家无法胜任时才逐级引入更高复杂度专家  。结果令人惊讶：这种**偏向低复杂度**的简单策略，竟能够自发地实现**任务—专家的有效匹配**，不同退化被自适应地分配给适宜复杂度的专家处理  。由于不相关的专家在推理中会被跳过，MoCE-IR显著提高了推理效率，同时保持了出色的恢复质量  。大量实验证明，该模型在多个图像恢复任务上**超越了先前SOTA方法**，实现了更高的性能和实际效率 。MoCE-IR表明，通过**动态容量分配**实现按需计算，是All-in-One模型提升效率与性能的有效途径。
- **UniRestorer（2025，待刊）**：Lin等人提出的UniRestorer重点解决**退化估计误差**对统一模型的影响  。以往方法要么**不区分退化**（degradation-agnostic，一律用同一模型处理）导致无法利用特定退化先验，要么**依赖退化识别**（degradation-aware，通过分类/估计选择子模型）但一旦识别出错性能就严重下降  。UniRestorer的创新在于构建**多粒度退化空间**和**多粒度专家模型**  。作者对常见退化进行了层次聚类，形成从粗到细的退化类别层级；同时训练对应的**粗粒度和细粒度专家**（MoE模型）  。在恢复时，模型首先进行退化类型估计，以及一个**“粒度估计”**来判断退化估计是否可靠 **。如果退化类型判断不确定或可能有较大偏差，则启用**粗粒度专家**（例如针对“大类”的退化模型，如“一般去雪”）；反之若判断精确，则调用**细粒度专家**（例如针对特定轻度雪、高斯噪声等的模型）  。这种双重估计与自适应专家选择机制，使模型即利用了退化种类信息，又对识别错误保持鲁棒性  。实验结果显示，UniRestorer相较既有All-in-One方法**有大幅度性能提升**，在多个评测中拉开了差距，并且其多任务效果已经**接近甚至匹敌某些单任务专用模型**  。这表明通过**适当粒度**建模退化，多任务统一模型的性能瓶颈有望被突破。

以上MoE类方法各有侧重，但都体现出**按需分配模型能力**的思想：通过引入可调整的子模块或专家，使统一模型在共享知识的同时，保留对特定退化的敏捷适应。表1总结了上述代表性方法的关键特征和性能。

| 方法        | 提出年份 (会议/期刊) | 关键技术与模型结构                                    | 自适应机制                                         | 性能表现                                                |
| ----------- | -------------------- | ----------------------------------------------------- | -------------------------------------------------- | ------------------------------------------------------- |
| ADMS        | 2023 (CVPR)          | 共享主干 + 每种退化3%参数的专用滤波器模块             | 退化类型分类驱动，按类别激活专用卷积滤波器         | 在Rain-Noise-Blur、Rain-Snow-Haze多退化数据集上性能领先 |
| PromptIR    | 2023 (NeurIPS)       | 统一Transformer骨干 + 插件式提示生成与交互模块        | 从输入图像隐含预测提示向量，动态引导解码过程       | 单模型在去噪、去雨、去雾等任务达SOTA，无需退化先验      |
| LoRA-IR     | 2024 (arXiv预印本)   | 共享CNN主干 + 多个低秩适配（LoRA）专家模块 + CLIP路由 | CLIP提取退化表征指导路由，稀疏选择低秩专家融合输出 | 跨14项任务在29个基准上整体性能最优，参数效率高          |
| MoCE-IR     | 2025 (CVPR)          | 多专家架构，专家块具不同计算复杂度与感受野            | “弹簧力”机制偏向低复杂度专家，逐级分配高复杂度处理 | 平均性能居当时首位，并可跳过无关专家实现高效推理        |
| UniRestorer | 2025 (预印本)        | 多粒度退化聚类 + 多层次MoE模型                        | 退化类型估计 + 粒度置信评估，选择粗/细粒度专家恢复 | 显著超越已有All-in-One方法，部分接近单任务模型性能      |

### **融合扩散模型和多模态的信息恢复**

除了上述架构上的改进，一些工作将**生成式扩散模型**和**多模态信息**引入All-in-One恢复，以进一步提升模型对复杂场景的适应能力。

**扩散模型先验**：利用预训练扩散模型强大的生成先验，可以帮助恢复过程产生更真实细节。Fei等人在CVPR 2023提出了将*Stable Diffusion*模型融入图像恢复的框架，以获得统一的生成式先验来指导多个任务 。随后，Jiang等人（ECCV 2024）提出**AutoDIR**系统 ——这是一个结合潜变量扩散模型的全自动图像恢复方法。AutoDIR首先通过**视觉-语言模型**（CLIP等）实现**盲图像质量评估（BIQA）**，自动检测输入图像存在的未知退化类型及程度 。接着，进入“All-in-One恢复”阶段，引入经过结构校正的**潜空间扩散模型**对图像进行重建，可同时处理多种退化 。得益于扩散模型强大的生成能力，AutoDIR在广泛的恢复任务上**超越了已有方法的性能** 。此外，AutoDIR的设计允许通过文本提示进行人性化的结果调控，实现**开放词汇的图像编辑**，用户可用自然语言指定希望的增强效果  。例如，可以输入“去除模糊并增加亮度”，模型将相应调整恢复策略。这使AutoDIR被视为**图像恢复领域的基础模型**雏形，不仅能处理现有退化，还能通过微调泛化到新任务 。

**多模态与代理系统**：除了文本，其他模态信息（如深度图、红外图像等）也被用于提升恢复效果 。部分研究利用额外的深度/分割信息作为输入，帮助模型理解退化与场景结构的关系，从而得到更好的重建。例如有方法利用**DepthAnything**生成的深度图约束恢复过程，使模型在恶劣天气下保持结构一致性 。再者，**Agentic IR**是最近提出的新范式，将大模型（如GPT-4）用于**分解复杂恢复任务**和**规划模型调用** 。例如**RestoreAgent（NeurIPS 2024）**构建了一个自治代理，能根据退化情况动态规划一系列子恢复步骤（如先去雨再去雾），并调用相应模块按顺序处理  。这些代理式方法借鉴了“大模型+工具”的理念，通过链式推理有效应对多重退化组合，被视作All-in-One恢复的自然延伸  。随着多模态大模型的发展，将语言、视觉等多源信息融合，或引入自治决策机制，都是提升All-in-One模型智能性和鲁棒性的有前景方向。

## 目录结构

- `asserts/`：项目相关的图片和资源文件。
- `papers-md/`：以Markdown格式整理的论文笔记或摘要。
- `papers/`：收集的论文PDF文件。


## 论文整理

### 2025

- **Complexity Experts are Task-Discriminative Learners for Any Image Restoration** (CVPR 2025)
  - [论文链接](https://openaccess.thecvf.com/content/CVPR2025/papers/Zamfir_Complexity_Experts_are_Task-Discriminative_Learners_for_Any_Image_Restoration_CVPR_2025_paper.pdf) ｜ [开源代码](https://github.com/eduardzamfir/MoCE-IR) ｜ [论文解读](paper-md/2025-CVPR-Complexity%20Experts%20are%20Task-Discriminative%20Learners%20for%20Any%20Image%20Restoration.md)
  - 近年来，集多种功能于一体的图像恢复模型在通过统一框架处理多样性退化问题方面取得了突破性进展。然而，**绑定于特定任务的参数在面对其他任务时常常处于非激活状态，这使得专家混合（Mixture-of-Experts, MoE）架构成为自然的延伸选择**。尽管如此，MoE 往往表现出不一致的行为：有些专家会在多个任务间意外泛化，而另一些专家甚至在其目标任务内表现不佳。这种情况阻碍了在推理过程中通过跳过无关专家以提升计算效率的尝试。我们认为，传统 MoE 的统一和僵化架构导致了这种不理想的表现。**为此，我们提出了“复杂度专家”——采用不同计算复杂度和感受野的灵活专家模块**。一个核心挑战是如何为每个专家分配任务，因为退化的复杂性事先未知。因此，我们在执行任务时采取了简单地偏向较低复杂度的策略。令人惊讶的是，这种偏好实际上有效推动了任务的特定分配，使任务能匹配到合适复杂度的专家。大量实验验证了我们的方法，在保证卓越性能的同时，实现了在推理时绕过无关专家的能力。我们提出的 MoCE-IR 模型超越了最新方法，展现出其高效性和实际应用价值。源代码和模型已在 eduardzamfir.github.io/MoCE-IR/ 公开发布。


## 用途

- 便于查找和学习最新的图像恢复相关论文。
- 提供论文笔记和摘要，帮助快速理解论文内容。
- 汇总相关资源，促进学术交流。

